/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.afrisoftech.hospinventory;

import com.afrisoftech.dbadmin.setFixedColumns;
import com.afrisoftech.lib.CurrencyFormatter;
import com.afrisoftech.lib.GetItemInfo;
import com.afrisoftech.lib.SQLDateFormat;
import java.sql.Date;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Timestamp;

/**
 *
 * @author saleem
 */
public class ContractPanel extends javax.swing.JPanel {

    /**
     * Creates new form ContractPanel
     */
    java.sql.Connection connectDB = null;
    org.netbeans.lib.sql.pool.PooledConnectionSource pConnDB = null;
    public ContractPanel(java.sql.Connection connDb, org.netbeans.lib.sql.pool.PooledConnectionSource pconnDB) {

       // refreshStatus = true;

        connectDB = connDb;

        pConnDB = pconnDB;
        initComponents();
        setFixedColumns.DisallowReordering(milestonesTbl);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        searchtenderc = new javax.swing.JDialog();
        tenderrecordspnl4 = new javax.swing.JPanel();
        tenderrecordstxt4 = new javax.swing.JTextField();
        tenderrecordsspnl4 = new javax.swing.JScrollPane();
        tenderrecordstbl4 = new com.afrisoftech.dbadmin.JTable();
        closebtn10 = new javax.swing.JButton();
        searchsupplierc = new javax.swing.JDialog();
        searchsupplierpnl5 = new javax.swing.JPanel();
        searchsuppliertxt5 = new javax.swing.JTextField();
        searchsupplierspnl5 = new javax.swing.JScrollPane();
        searchsupplierstbl5 = new com.afrisoftech.dbadmin.JTable();
        closebtn11 = new javax.swing.JButton();
        contract_management = new javax.swing.JPanel();
        jScrollPane14 = new javax.swing.JScrollPane();
        milestonesTbl = new com.afrisoftech.dbadmin.JTable();
        jPanel51 = new javax.swing.JPanel();
        jLabel49 = new javax.swing.JLabel();
        jLabel46 = new javax.swing.JLabel();
        jPanel59 = new javax.swing.JPanel();
        tenderTxt = new javax.swing.JTextField();
        jButton22 = new javax.swing.JButton();
        jPanel60 = new javax.swing.JPanel();
        contractorTxt = new javax.swing.JTextField();
        jButton23 = new javax.swing.JButton();
        jLabel47 = new javax.swing.JLabel();
        contractAmt = new javax.swing.JTextField();
        jLabel50 = new javax.swing.JLabel();
        performBal = new javax.swing.JTextField();
        jLabel55 = new javax.swing.JLabel();
        jLabel57 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        contractStartdt = new com.afrisoftech.lib.DatePicker();
        contractEnddt = new com.afrisoftech.lib.DatePicker();
        jSeparator1 = new javax.swing.JSeparator();
        jPanel55 = new javax.swing.JPanel();
        jButton24 = new javax.swing.JButton();
        jButton25 = new javax.swing.JButton();
        jButton26 = new javax.swing.JButton();

        searchtenderc.setModal(true);
        searchtenderc.setUndecorated(true);
        searchtenderc.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                searchtendercFocusLost(evt);
            }
        });
        searchtenderc.getContentPane().setLayout(new java.awt.GridBagLayout());

        tenderrecordspnl4.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        tenderrecordspnl4.setLayout(new java.awt.GridBagLayout());

        tenderrecordstxt4.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                tenderrecordstxt4CaretUpdate(evt);
            }
        });
        tenderrecordstxt4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tenderrecordstxt4ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 300.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
        tenderrecordspnl4.add(tenderrecordstxt4, gridBagConstraints);

        tenderrecordstbl4.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        tenderrecordstbl4.setToolTipText("Click on the target row to select the patient from the search.");
        tenderrecordstbl4.setShowHorizontalLines(false);
        /*javax.swing.table.TableColumn column = null;

        for (int i = 0; i < 4; i++) {

            column = jSearchTable.getColumnModel().getColumn(i);

            if (i == 1) {

                column.setPreferredWidth(400);
                //sport column is bigger
            } else {

                column.setPreferredWidth(200);

            }
        }
        */
        tenderrecordstbl4.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tenderrecordstbl4MouseClicked(evt);
            }
        });
        tenderrecordsspnl4.setViewportView(tenderrecordstbl4);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 20.0;
        tenderrecordspnl4.add(tenderrecordsspnl4, gridBagConstraints);

        closebtn10.setText("Close");
        closebtn10.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closebtn10ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        tenderrecordspnl4.add(closebtn10, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        searchtenderc.getContentPane().add(tenderrecordspnl4, gridBagConstraints);

        searchsupplierc.setModal(false);
        searchsupplierc.setUndecorated(true);
        searchsupplierc.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                searchsuppliercFocusLost(evt);
            }
        });
        searchsupplierc.getContentPane().setLayout(new java.awt.GridBagLayout());

        searchsupplierpnl5.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        searchsupplierpnl5.setLayout(new java.awt.GridBagLayout());

        searchsuppliertxt5.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                searchsuppliertxt5CaretUpdate(evt);
            }
        });
        searchsuppliertxt5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchsuppliertxt5ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 300.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
        searchsupplierpnl5.add(searchsuppliertxt5, gridBagConstraints);

        searchsupplierstbl5.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        searchsupplierstbl5.setToolTipText("Click on the target row to select the patient from the search.");
        searchsupplierstbl5.setShowHorizontalLines(false);
        /*javax.swing.table.TableColumn column = null;

        for (int i = 0; i < 4; i++) {

            column = jSearchTable.getColumnModel().getColumn(i);

            if (i == 1) {

                column.setPreferredWidth(400);
                //sport column is bigger
            } else {

                column.setPreferredWidth(200);

            }
        }
        */
        searchsupplierstbl5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                searchsupplierstbl5MouseClicked(evt);
            }
        });
        searchsupplierspnl5.setViewportView(searchsupplierstbl5);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 20.0;
        searchsupplierpnl5.add(searchsupplierspnl5, gridBagConstraints);

        closebtn11.setText("Close");
        closebtn11.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closebtn11ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        searchsupplierpnl5.add(closebtn11, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        searchsupplierc.getContentPane().add(searchsupplierpnl5, gridBagConstraints);

        setLayout(new java.awt.GridBagLayout());

        contract_management.setEnabled(false);
        contract_management.setLayout(new java.awt.GridBagLayout());

        jScrollPane14.setBorder(javax.swing.BorderFactory.createTitledBorder("MileStones Management"));

        milestonesTbl.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Item Description", "Quantity ", "Units", "Delivery Phases", "First Delivery Date"
            }
        ));
        jScrollPane14.setViewportView(milestonesTbl);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 5.0;
        contract_management.add(jScrollPane14, gridBagConstraints);

        jPanel51.setBackground(new java.awt.Color(153, 255, 255));
        jPanel51.setLayout(new java.awt.GridBagLayout());

        jLabel49.setText("TENDER NO");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 2.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 8, 0, 0);
        jPanel51.add(jLabel49, gridBagConstraints);

        jLabel46.setText("CONTRACTOR");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 2.0;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(jLabel46, gridBagConstraints);

        jPanel59.setLayout(new java.awt.GridBagLayout());

        tenderTxt.setEditable(false);
        tenderTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tenderTxtActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        jPanel59.add(tenderTxt, gridBagConstraints);

        jButton22.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton22ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weighty = 1.0;
        jPanel59.add(jButton22, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 2.0;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(jPanel59, gridBagConstraints);

        jPanel60.setLayout(new java.awt.GridBagLayout());

        contractorTxt.setEditable(false);
        contractorTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                contractorTxtActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        jPanel60.add(contractorTxt, gridBagConstraints);

        jButton23.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton23ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weighty = 1.0;
        jPanel60.add(jButton23, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 2.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 20);
        jPanel51.add(jPanel60, gridBagConstraints);

        jLabel47.setText("TOTAL CONTRACT AMOUNT");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 8, 0, 0);
        jPanel51.add(jLabel47, gridBagConstraints);

        contractAmt.setEditable(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(contractAmt, gridBagConstraints);

        jLabel50.setText("Performance Bond Value");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 8, 0, 0);
        jPanel51.add(jLabel50, gridBagConstraints);

        performBal.setForeground(new java.awt.Color(255, 0, 0));
        performBal.setEnabled(false);
        performBal.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                performBalCaretUpdate(evt);
            }
        });
        performBal.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                performBalFocusLost(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(performBal, gridBagConstraints);

        jLabel55.setText("Nil");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        jPanel51.add(jLabel55, gridBagConstraints);

        jLabel57.setForeground(new java.awt.Color(255, 51, 51));
        jLabel57.setText("Nil");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        jPanel51.add(jLabel57, gridBagConstraints);

        jComboBox1.setEditable(true);
        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "-" }));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(jComboBox1, gridBagConstraints);

        jLabel1.setText("Bank/Insurance");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(jLabel1, gridBagConstraints);

        jLabel2.setFont(new java.awt.Font("Dialog", 1, 14)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(102, 102, 102));
        jLabel2.setText("CONTRACT ENDS");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 6;
        jPanel51.add(jLabel2, gridBagConstraints);

        jLabel3.setFont(new java.awt.Font("Dialog", 1, 14)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(102, 102, 102));
        jLabel3.setText("CONTRACT STARTS");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.weightx = 1.0;
        jPanel51.add(jLabel3, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel51.add(contractStartdt, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 20);
        jPanel51.add(contractEnddt, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weighty = 9.3;
        jPanel51.add(jSeparator1, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 2.0;
        contract_management.add(jPanel51, gridBagConstraints);

        jPanel55.setBorder(javax.swing.BorderFactory.createTitledBorder("Actions"));
        jPanel55.setLayout(new java.awt.GridBagLayout());

        jButton24.setBackground(new java.awt.Color(204, 204, 255));
        jButton24.setText("Save & Print Contract Document");
        jButton24.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton24ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel55.add(jButton24, gridBagConstraints);

        jButton25.setBackground(new java.awt.Color(204, 204, 255));
        jButton25.setText("Edit Contract Details");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel55.add(jButton25, gridBagConstraints);

        jButton26.setBackground(new java.awt.Color(204, 204, 255));
        jButton26.setText("Close Form");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel55.add(jButton26, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
        gridBagConstraints.weighty = 1.0;
        contract_management.add(jPanel55, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        add(contract_management, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

    private void tenderTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tenderTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tenderTxtActionPerformed

    private void jButton22ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton22ActionPerformed
        // TODO add your handling code here:
        java.awt.Point p = tenderTxt.getLocationOnScreen();
        searchtenderc.setSize(400, 200);
        searchtenderc.setLocation(p);
        searchtenderc.setVisible(true);

    }//GEN-LAST:event_jButton22ActionPerformed

    private void contractorTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_contractorTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_contractorTxtActionPerformed

    private void jButton23ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton23ActionPerformed
        // TODO add your handling code here:
        java.awt.Point p = contractorTxt.getLocationOnScreen();
        searchsupplierc.setSize(400, 200);
        searchsupplierc.setLocation(p);
        searchsupplierc.setVisible(true);
    }//GEN-LAST:event_jButton23ActionPerformed

    private void performBalCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_performBalCaretUpdate
                // TODO add your handling code here:
                if(performBal.getCaretPosition()==0){
            
                       jLabel57.setVisible(false);
                    }
                else{
                        try{
                        java.sql.PreparedStatement f = connectDB.prepareStatement("SELECT replace(cash_words('"+performBal.getText().replace(",", "")+"'::money),'dollars','Kenya Shillings')");
                        ResultSet t = f.executeQuery();
                        while (t.next()){
                                jLabel57.setVisible(true);
                                jLabel57.setText(t.getObject(1).toString());
                    
                            }
                
                        }
                    catch(Exception d){
                        d.printStackTrace();
                        }
            
            
            
                    }
    }//GEN-LAST:event_performBalCaretUpdate

    private void performBalFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_performBalFocusLost
        //        // TODO add your handling code here:
        //        if(jTextField9.getText().length()==0){
            //            Double b= Double.parseDouble(jTextField9.getText().toString());
            //        jTextField9.setText("Kshs  "+com.afrisoftech.lib.CurrencyFormatter.getFormattedDouble(b).toString());
            //
            //        }
    }//GEN-LAST:event_performBalFocusLost

    private void jButton24ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton24ActionPerformed
        try {
            // TODO add your handling code here:
            connectDB.setAutoCommit(false);

            java.sql.PreparedStatement save = connectDB.prepareStatement("UPDATE st_contract_mgt SET  contract_begin=?,contract_end=?, dr_performance=? WHERE tender_no='"+tenderTxt.getText().toString()+"' AND supplier ILIKE '"+contractorTxt.getText().toString()+"';");
            
           // java.sql.PreparedStatement save = connectDB.prepareStatement("INSERT INTO st_contract_mgt(tender_no, supplier, item_desc, quantity, units,contract_begin,contract_end)"
             //   + " VALUES (?, ?, ?, ?, ?, ?);");

            
           save.setDate(1, SQLDateFormat.getSQLDate(contractStartdt.getDate()));
           save.setDate(2, SQLDateFormat.getSQLDate(contractEnddt.getDate()));
           save.setObject(3, Double.valueOf(performBal.getText().replace(",", "")));
           save.executeUpdate();
                   
                   
           java.sql.PreparedStatement save2 = connectDB.prepareStatement("UPDATE st_recommendation SET contract_signed = true WHERE  quotation_no='"+tenderTxt.getText().toString()+"' AND supplier ILIKE '"+contractorTxt.getText().toString()+"' ");
           save2.executeUpdate();
            
//            for (int i=0;i<milestonesTbl.getModel().getRowCount();i++){
//                if(milestonesTbl.getModel().getValueAt(i, 0)!=null){
////                    save.setObject(1, jTextField3.getText().toString());
////                    save.setObject(2, jTextField6.getText().toString());
////                    save.setObject(3, milestonesTbl.getModel().getValueAt(i, 0));
////                    save.setObject(4, milestonesTbl.getModel().getValueAt(i, 1));
////                    save.setObject(5, milestonesTbl.getModel().getValueAt(i, 2));
////                    save.setObject(6, milestonesTbl.getModel().getValueAt(i, 2));
////                    save.setObject(7, milestonesTbl.getModel().getValueAt(i, 2));
//
//                    save.executeUpdate();
//                    
//                    
//                    
//           
//                }
//            }

//            java.sql.PreparedStatement save2 = connectDB.prepareStatement("UPDATE st_floated_quotation_docs SET performance_bond= '"+jTextField9.getText().toString()+"' WHERE supplier_name='"+jTextField6.getText().toString()+"' and tender_no='"+jTextField3.getText().toString()+"'");
//
//            save2.executeUpdate();
            
            
            
            
            
            
            

            connectDB.commit();
            javax.swing.JOptionPane.showMessageDialog(this, "Contract Generated Successfully");

        }

        catch (SQLException ex) {
            ex.printStackTrace();
            try {
                connectDB.rollback();
            } catch (SQLException ex1) {
                ex1.printStackTrace();
            }
        }

    }//GEN-LAST:event_jButton24ActionPerformed

    private void tenderrecordstxt4CaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_tenderrecordstxt4CaretUpdate
        // TODO add your handling code here:
        if(tenderrecordstxt4.getCaretPosition()==0){

        }
        else{
            tenderrecordstbl4.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "SELECT DISTINCT quotation_no FROM st_orders WHERE quotation_no ILIKE '" + tenderrecordstxt4.getText().toString() + "%' "
                    + "and ordered=false and order_no IS NULL  ORDER BY 1"));
            tenderrecordstbl4.setShowHorizontalLines(true);
            tenderrecordsspnl4.setViewportView(tenderrecordstbl4);

        }
    }//GEN-LAST:event_tenderrecordstxt4CaretUpdate

    private void tenderrecordstxt4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tenderrecordstxt4ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tenderrecordstxt4ActionPerformed

    private void tenderrecordstbl4MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tenderrecordstbl4MouseClicked
        // TODO add your handling code here:
        jLabel55.setText(null);
        tenderTxt.setText(tenderrecordstbl4.getModel().getValueAt(tenderrecordstbl4.getSelectedRow(), 0).toString());
        searchsupplierstbl5.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "select distinct supplier,  sum(quantity*unit_price)::integer from st_orders where quotation_no = '"+tenderTxt.getText().toString()+"'  AND ordered = false and supplier IN (select distinct supplier from st_contract_mgt) group by 1  "));
        this.searchtenderc.dispose();

    }//GEN-LAST:event_tenderrecordstbl4MouseClicked

    private void closebtn10ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closebtn10ActionPerformed
        // TODO add your handling code here:
        this.searchtenderc.dispose();
    }//GEN-LAST:event_closebtn10ActionPerformed

    private void searchtendercFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_searchtendercFocusLost
        // TODO add your handling code here:
        this.searchtenderc.dispose();
    }//GEN-LAST:event_searchtendercFocusLost

    private void searchsuppliertxt5CaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_searchsuppliertxt5CaretUpdate
        // TODO add your handling code here:
        searchsupplierstbl5.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "select distinct supplier,  sum(quantity*unit_price)::integer from st_orders where quotation_no = '"+tenderTxt.getText().toString()+"' AND supplier ilike '"+contractorTxt.getText()+"%' AND ordered = false group by 1"));
    }//GEN-LAST:event_searchsuppliertxt5CaretUpdate

    private void searchsuppliertxt5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchsuppliertxt5ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_searchsuppliertxt5ActionPerformed

    private void searchsupplierstbl5MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_searchsupplierstbl5MouseClicked
        // TODO add your handling code here:
        contractorTxt.setText(searchsupplierstbl5.getModel().getValueAt(searchsupplierstbl5.getSelectedRow(), 0).toString());
        
        milestonesTbl.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "select item ITEM_DESC,units UNIT,quantity QTY_AWARDED,unit_price,sum(quantity*unit_price) NET_VALUE from st_orders where quotation_no= '"+tenderTxt.getText()+"' and supplier='"+contractorTxt.getText()+"' AND order_no is null group by 1,2,3,4 "));

        contractAmt.setText(CurrencyFormatter.getFormattedDouble(Double.valueOf(searchsupplierstbl5.getModel().getValueAt(searchsupplierstbl5.getSelectedRow(), 1).toString())));

        if(contractAmt.getText().length()>0){

            Double a = Double.parseDouble(contractAmt.getText().toString().replace(",", ""));
            try{
                java.sql.PreparedStatement s = connectDB.prepareStatement("SELECT replace(cash_words('"+contractAmt.getText()+"'::money),'dollars','Kenya Shillings')");
                ResultSet t = s.executeQuery();
                while (t.next()){
                    jLabel55.setVisible(true);
                    jLabel55.setText(t.getObject(1).toString());

                }

            }
            catch(Exception g){
                g.printStackTrace();
            }

            
     
           // performBal.setText(com.afrisoftech.lib.CurrencyFormatter.getFormattedDouble(b).toString());
             performBal.setText(com.afrisoftech.lib.CurrencyFormatter.getFormattedDouble(GetItemInfo.geTPerformanceBond(tenderTxt.getText().toString(), contractorTxt.getText().toString(), connectDB)));
             Double b = Double.valueOf(performBal.getText().replace(",", ""));
            try{
                java.sql.PreparedStatement f = connectDB.prepareStatement("SELECT replace(cash_words('"+b+"'::money),'dollars','Kenya Shillings')");
                ResultSet t = f.executeQuery();
                while (t.next()){
                    jLabel57.setVisible(true);
                    jLabel57.setText(t.getObject(1).toString());

                }

            }
            catch(Exception d){
                d.printStackTrace();
            }

            // com.afrisoftech.lib.CurrencyFormatter.getFormattedDouble(b);

            
        }
        else{
            performBal.setText("");
        }

        this.searchsupplierc.dispose();
        //
    }//GEN-LAST:event_searchsupplierstbl5MouseClicked

    private void closebtn11ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closebtn11ActionPerformed
        // TODO add your handling code here:
        this.searchsupplierc.dispose();
    }//GEN-LAST:event_closebtn11ActionPerformed

    private void searchsuppliercFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_searchsuppliercFocusLost
        // TODO add your handling code here:
        this.searchsupplierc.dispose();
    }//GEN-LAST:event_searchsuppliercFocusLost

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton closebtn10;
    private javax.swing.JButton closebtn11;
    private javax.swing.JTextField contractAmt;
    private com.afrisoftech.lib.DatePicker contractEnddt;
    private com.afrisoftech.lib.DatePicker contractStartdt;
    private javax.swing.JPanel contract_management;
    private javax.swing.JTextField contractorTxt;
    private javax.swing.JButton jButton22;
    private javax.swing.JButton jButton23;
    private javax.swing.JButton jButton24;
    private javax.swing.JButton jButton25;
    private javax.swing.JButton jButton26;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel47;
    private javax.swing.JLabel jLabel49;
    private javax.swing.JLabel jLabel50;
    private javax.swing.JLabel jLabel55;
    private javax.swing.JLabel jLabel57;
    private javax.swing.JPanel jPanel51;
    private javax.swing.JPanel jPanel55;
    private javax.swing.JPanel jPanel59;
    private javax.swing.JPanel jPanel60;
    private javax.swing.JScrollPane jScrollPane14;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JTable milestonesTbl;
    private javax.swing.JTextField performBal;
    private javax.swing.JDialog searchsupplierc;
    private javax.swing.JPanel searchsupplierpnl5;
    private javax.swing.JScrollPane searchsupplierspnl5;
    private javax.swing.JTable searchsupplierstbl5;
    private javax.swing.JTextField searchsuppliertxt5;
    private javax.swing.JDialog searchtenderc;
    private javax.swing.JTextField tenderTxt;
    private javax.swing.JPanel tenderrecordspnl4;
    private javax.swing.JScrollPane tenderrecordsspnl4;
    private javax.swing.JTable tenderrecordstbl4;
    private javax.swing.JTextField tenderrecordstxt4;
    // End of variables declaration//GEN-END:variables
}
