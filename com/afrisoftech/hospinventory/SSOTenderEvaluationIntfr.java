/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.afrisoftech.hospinventory;

import com.afrisoftech.lib.ClearTable;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;

/**
 *
 * @author saleem
 */
public class SSOTenderEvaluationIntfr extends javax.swing.JInternalFrame {

    /**
     * Creates new form SSOTenderEvaluationIntfr
     */
    java.sql.Connection connectDB = null;
    
    org.netbeans.lib.sql.pool.PooledConnectionSource pConnDB = null;
     Vector v = new Vector();
    private double total;
    private double percent;
    public SSOTenderEvaluationIntfr(java.sql.Connection connDb, org.netbeans.lib.sql.pool.PooledConnectionSource pconnDB) {
         pConnDB = pconnDB;
        
        connectDB = connDb;
        
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        searchtender = new javax.swing.JDialog();
        tenderrecordspnl = new javax.swing.JPanel();
        tenderrecordstxt = new javax.swing.JTextField();
        tenderrecordsspnl = new javax.swing.JScrollPane();
        tenderrecordstbl = new com.afrisoftech.dbadmin.JTable();
        closebtn1 = new javax.swing.JButton();
        searchtender1 = new javax.swing.JDialog();
        tenderrecordspnl1 = new javax.swing.JPanel();
        tenderrecordstxt1 = new javax.swing.JTextField();
        tenderrecordsspnl1 = new javax.swing.JScrollPane();
        tenderrecordstbl1 = new com.afrisoftech.dbadmin.JTable();
        closebtn2 = new javax.swing.JButton();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel6 = new javax.swing.JPanel();
        jTabbedPane2 = new javax.swing.JTabbedPane();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        awardingTbl = new com.afrisoftech.dbadmin.JTable();
        jPanel4 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        jPanel46 = new javax.swing.JPanel();
        tenderNoTxt = new javax.swing.JTextField();
        searchButton2 = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        supplier_codeCmbx = new javax.swing.JComboBox();
        jPanel5 = new javax.swing.JPanel();
        jButton3 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        jButton6 = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        totalTxt = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        percentTxt = new javax.swing.JTextField();
        jPanel7 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        TenderOtherTxt = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        datePicker2 = new com.afrisoftech.lib.DatePicker();
        jTextField3 = new javax.swing.JTextField();
        jPanel8 = new javax.swing.JPanel();
        jButton7 = new javax.swing.JButton();
        jButton8 = new javax.swing.JButton();
        jLabel10 = new javax.swing.JLabel();
        jComboBox2 = new javax.swing.JComboBox();
        jLabel12 = new javax.swing.JLabel();
        bidderCmbx = new javax.swing.JComboBox();

        searchtender.setModal(true);
        searchtender.setUndecorated(true);
        searchtender.getContentPane().setLayout(new java.awt.GridBagLayout());

        tenderrecordspnl.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        tenderrecordspnl.setLayout(new java.awt.GridBagLayout());

        tenderrecordstxt.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                tenderrecordstxtCaretUpdate(evt);
            }
        });
        tenderrecordstxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tenderrecordstxtActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 300.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
        tenderrecordspnl.add(tenderrecordstxt, gridBagConstraints);

        tenderrecordstbl.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        tenderrecordstbl.setToolTipText("Click on the target row to select the patient from the search.");
        tenderrecordstbl.setShowHorizontalLines(false);
        /*javax.swing.table.TableColumn column = null;

        for (int i = 0; i < 4; i++) {

            column = jSearchTable.getColumnModel().getColumn(i);

            if (i == 1) {

                column.setPreferredWidth(400);
                //sport column is bigger
            } else {

                column.setPreferredWidth(200);

            }
        }
        */
        tenderrecordstbl.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tenderrecordstblMouseClicked(evt);
            }
        });
        tenderrecordsspnl.setViewportView(tenderrecordstbl);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 20.0;
        tenderrecordspnl.add(tenderrecordsspnl, gridBagConstraints);

        closebtn1.setText("Close");
        closebtn1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closebtn1ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        tenderrecordspnl.add(closebtn1, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        searchtender.getContentPane().add(tenderrecordspnl, gridBagConstraints);

        searchtender1.setModal(true);
        searchtender1.setUndecorated(true);
        searchtender1.getContentPane().setLayout(new java.awt.GridBagLayout());

        tenderrecordspnl1.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        tenderrecordspnl1.setLayout(new java.awt.GridBagLayout());

        tenderrecordstxt1.addCaretListener(new javax.swing.event.CaretListener() {
            public void caretUpdate(javax.swing.event.CaretEvent evt) {
                tenderrecordstxt1CaretUpdate(evt);
            }
        });
        tenderrecordstxt1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tenderrecordstxt1ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 300.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
        tenderrecordspnl1.add(tenderrecordstxt1, gridBagConstraints);

        tenderrecordstbl1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        tenderrecordstbl1.setToolTipText("Click on the target row to select the patient from the search.");
        tenderrecordstbl1.setShowHorizontalLines(false);
        /*javax.swing.table.TableColumn column = null;

        for (int i = 0; i < 4; i++) {

            column = jSearchTable.getColumnModel().getColumn(i);

            if (i == 1) {

                column.setPreferredWidth(400);
                //sport column is bigger
            } else {

                column.setPreferredWidth(200);

            }
        }
        */
        tenderrecordstbl1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tenderrecordstbl1MouseClicked(evt);
            }
        });
        tenderrecordsspnl1.setViewportView(tenderrecordstbl1);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 20.0;
        tenderrecordspnl1.add(tenderrecordsspnl1, gridBagConstraints);

        closebtn2.setText("Close");
        closebtn2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closebtn2ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        tenderrecordspnl1.add(closebtn2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        searchtender1.getContentPane().add(tenderrecordspnl1, gridBagConstraints);

        setBackground(new java.awt.Color(0, 204, 204));
        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Tender Preliminary Evaluation");
        setMinimumSize(new java.awt.Dimension(1076, 304));
        getContentPane().setLayout(new java.awt.GridBagLayout());

        jTabbedPane1.setBackground(new java.awt.Color(204, 255, 204));

        jPanel6.setLayout(new java.awt.GridBagLayout());

        jTabbedPane2.setTabPlacement(javax.swing.JTabbedPane.BOTTOM);
        jTabbedPane2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTabbedPane2MouseClicked(evt);
            }
        });

        jPanel3.setLayout(new java.awt.GridBagLayout());

        awardingTbl.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Criteria", "Award", "Mark ", "Remarks"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Object.class, java.lang.Boolean.class, java.lang.Object.class, java.lang.Object.class
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        awardingTbl.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                awardingTblMouseClicked(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                awardingTblMouseReleased(evt);
            }
        });
        jScrollPane2.setViewportView(awardingTbl);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 4.0;
        jPanel3.add(jScrollPane2, gridBagConstraints);

        jPanel4.setLayout(new java.awt.GridBagLayout());

        jLabel4.setText("Supplier");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel4.add(jLabel4, gridBagConstraints);

        jPanel46.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel46.setLayout(new java.awt.GridBagLayout());

        tenderNoTxt.setEditable(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 2.0;
        gridBagConstraints.weighty = 1.0;
        jPanel46.add(tenderNoTxt, gridBagConstraints);

        searchButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/kiwi/images/date.gif"))); // NOI18N
        searchButton2.setToolTipText("Search");
        searchButton2.setHorizontalAlignment(javax.swing.SwingConstants.TRAILING);
        searchButton2.setMaximumSize(new java.awt.Dimension(74, 53));
        searchButton2.setMinimumSize(new java.awt.Dimension(74, 53));
        searchButton2.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        searchButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchButton2ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        jPanel46.add(searchButton2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.LINE_START;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel4.add(jPanel46, gridBagConstraints);

        jLabel3.setText("Tender No");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel4.add(jLabel3, gridBagConstraints);

        supplier_codeCmbx.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "-" }));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 10);
        jPanel4.add(supplier_codeCmbx, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 4.0;
        jPanel3.add(jPanel4, gridBagConstraints);

        jPanel5.setBorder(new javax.swing.border.MatteBorder(null));
        jPanel5.setLayout(new java.awt.GridBagLayout());

        jButton3.setBackground(new java.awt.Color(0, 255, 255));
        jButton3.setText("  Save & Print Preliminary Report");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel5.add(jButton3, gridBagConstraints);

        jButton5.setBackground(new java.awt.Color(0, 255, 255));
        jButton5.setText("              Edit             ");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel5.add(jButton5, gridBagConstraints);

        jButton6.setBackground(new java.awt.Color(0, 255, 255));
        jButton6.setText("         Close         ");
        jButton6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton6ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel5.add(jButton6, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 0.2;
        jPanel3.add(jPanel5, gridBagConstraints);

        jLabel5.setFont(new java.awt.Font("Dialog", 1, 14)); // NOI18N
        jLabel5.setText("Total Marks");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.weightx = 1.0;
        jPanel3.add(jLabel5, gridBagConstraints);

        totalTxt.setEditable(false);
        totalTxt.setFont(new java.awt.Font("Dialog", 1, 14)); // NOI18N
        totalTxt.setForeground(new java.awt.Color(255, 0, 51));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 400);
        jPanel3.add(totalTxt, gridBagConstraints);

        jLabel9.setFont(new java.awt.Font("Dialog", 1, 14)); // NOI18N
        jLabel9.setText("% Score");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 3;
        jPanel3.add(jLabel9, gridBagConstraints);

        percentTxt.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        percentTxt.setForeground(new java.awt.Color(255, 0, 51));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 400);
        jPanel3.add(percentTxt, gridBagConstraints);

        jTabbedPane2.addTab("Preliminary Evaluation", jPanel3);

        jPanel7.setLayout(new java.awt.GridBagLayout());

        jLabel6.setText("Tender No");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel7.add(jLabel6, gridBagConstraints);

        TenderOtherTxt.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 200);
        jPanel7.add(TenderOtherTxt, gridBagConstraints);

        jLabel7.setText("Bid Expiry Date");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        jPanel7.add(jLabel7, gridBagConstraints);

        jLabel8.setText("Bid Bond Amount");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        jPanel7.add(jLabel8, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 250);
        jPanel7.add(datePicker2, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 200);
        jPanel7.add(jTextField3, gridBagConstraints);

        jPanel8.setLayout(new java.awt.GridBagLayout());

        jButton7.setBackground(new java.awt.Color(0, 204, 204));
        jButton7.setText("Save Bidder Details");
        jButton7.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton7ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel8.add(jButton7, gridBagConstraints);

        jButton8.setBackground(new java.awt.Color(0, 204, 204));
        jButton8.setText("Clear Form");
        jButton8.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton8ActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel8.add(jButton8, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridheight = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 10);
        jPanel7.add(jPanel8, gridBagConstraints);

        jLabel10.setText("Bank/Insurance");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        jPanel7.add(jLabel10, gridBagConstraints);

        jComboBox2.setEditable(true);
        jComboBox2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jComboBox2FocusLost(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 200);
        jPanel7.add(jComboBox2, gridBagConstraints);

        jLabel12.setText("Bidder");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        jPanel7.add(jLabel12, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 200);
        jPanel7.add(bidderCmbx, gridBagConstraints);

        jTabbedPane2.addTab("Other Requirements", jPanel7);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel6.add(jTabbedPane2, gridBagConstraints);

        jTabbedPane1.addTab("Preliminary Evaluation", jPanel6);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        getContentPane().add(jTabbedPane1, gridBagConstraints);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void tenderrecordstxtCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_tenderrecordstxtCaretUpdate
        // TODO add your handling code here:
        if (this.tenderrecordstxt.getCaretPosition() < 3) {
            System.out.print("Nothing");

        } else

        {
            tenderrecordstbl.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "SELECT DISTINCT quotation_no Tender_No FROM st_floated_quotations where "
                + "quotation_no ilike '%T%' and  quotation_no ilike '" +tenderrecordstxt.getText()+"%'  order by 1 desc;"));
        tenderrecordstbl.setShowHorizontalLines(false);

        tenderrecordsspnl.setViewportView(tenderrecordstbl);

        }

    }//GEN-LAST:event_tenderrecordstxtCaretUpdate

    private void tenderrecordstxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tenderrecordstxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tenderrecordstxtActionPerformed
    private void biddderListSync(String TenderNo) {
    
    
    
     supplier_codeCmbx.setModel(com.afrisoftech.lib.ComboBoxModel.ComboBoxModel(connectDB, "SELECT  bidder_no FROM st_bidder_code where quotation_no = '"+TenderNo+"' "
                  + "and bidder_no NOT IN (SELECT distinct supplier_code from st_preliminary_results where quotation_no = '"+TenderNo+"')"));
      
   int checker = supplier_codeCmbx.getItemCount();
   
   if(checker<1){
   
       JOptionPane.showMessageDialog(this , "Intrested Bidders In this Tender are Exhausted");
       
       ClearTable.clearthisTable(awardingTbl);
//       awardingTbl.setModel(null);
   
   
   }
    
    
    }
    private void tenderrecordstblMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tenderrecordstblMouseClicked
      totalTxt.setText(null);
      
      
      percentTxt.setText(null);
        
        
        
        
        
        if(jTabbedPane1.getSelectedIndex()==0){
   
        // TODO add your handling code here:
       // tendernotxt.setText(tenderrecordstbl.getValueAt(tenderrecordstbl.getSelectedRow(), 0).toString());
        
 
          tenderNoTxt.setText(tenderrecordstbl.getValueAt(tenderrecordstbl.getSelectedRow(), 0).toString());
          
          System.out.println(tenderNoTxt.getText());
             //SELECT  bidder_no FROM st_bidder_code where quotation_no='KNH/TNo1-2013/2014';
         biddderListSync(tenderNoTxt.getText());

          awardingTbl.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "SELECT  pr_item as Criteria, false as Availed, '0.00' as Mark, '-' as Remarks FROM st_preliminary_criteria where quotation_no='"+tenderNoTxt.getText()+"' ;"));
          
          
          searchtender.dispose();

  
  
  }
        
        

    }//GEN-LAST:event_tenderrecordstblMouseClicked

    private void closebtn1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closebtn1ActionPerformed
        // TODO add your handling code here:
        searchtender.dispose();
        
    }//GEN-LAST:event_closebtn1ActionPerformed

    private void searchButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchButton2ActionPerformed
        // TODO add your handling code here:
        java.awt.Point p = tenderNoTxt.getLocationOnScreen();
        searchtender.setSize(400, 200);
        searchtender.setLocation(p);
        searchtender.setVisible(true);
        searchtender.setModal(false);
    }//GEN-LAST:event_searchButton2ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        
       
        
        try {
            
            Double a =0.00;
            
            a=(Double.parseDouble(totalTxt.getText().toString())/awardingTbl.getRowCount())*100;
            
            java.sql.PreparedStatement sup = connectDB.prepareStatement("SELECT  bidder FROM st_bidder_code where bidder_no='"+supplier_codeCmbx.getSelectedItem().toString()+"' and quotation_no='"+tenderNoTxt.getText().toString()+"'; ");
            //
            java.sql.ResultSet rset1 = sup.executeQuery();
            java.lang.String supname = null ;
          while(rset1.next()) 
           
          {  supname = rset1.getObject(1).toString();}
              
               
               
           
      connectDB.setAutoCommit(false);
            
        for(int i=0;i<awardingTbl.getRowCount();i++){
            java.sql.PreparedStatement pst = connectDB.prepareStatement("INSERT INTO st_preliminary_results(quotation_no, supplier_code, supplier, criteria, mark_awarded,total_mark,remarks)VALUES (? ,?, ?, ?, ?, ?, ?);");
            

            pst.setObject(1, tenderNoTxt.getText().toString()); 
            pst.setObject(2,supplier_codeCmbx.getSelectedItem().toString());            
            pst.setObject(3, supname);
           
            pst.setObject(4, awardingTbl.getModel().getValueAt(i, 0).toString());
            pst.setDouble(5, Double.parseDouble(awardingTbl.getModel().getValueAt(i, 2).toString()));
            pst.setDouble(6, a);
            pst.setObject(7, awardingTbl.getModel().getValueAt(i, 3).toString());
            pst.executeUpdate();
              }
        
        
        ///tracking 
        TenderTrack.TrackTable(connectDB, "evaluation", com.afrisoftech.lib.UserName.getLoginName(connectDB).toLowerCase()+"-PRE-"+com.afrisoftech.lib.UserName.getServerDate(connectDB) , tenderNoTxt.getText());
        connectDB.commit();
        
        javax.swing.JOptionPane.showMessageDialog(this, "Bidder Evaluated Successfully");
        
        supplier_codeCmbx.setModel(com.afrisoftech.lib.ComboBoxModel.ComboBoxModel(connectDB, "SELECT DISTINCT bidder_no FROM st_bidder_code where quotation_no = '"+tenderNoTxt.getText()+"' "
                  + "and bidder_no NOT IN (SELECT distinct supplier_code from st_preliminary_results where quotation_no = '"+tenderNoTxt.getText()+"')"));
       
      ClearTable.clearthisTable(awardingTbl);
      totalTxt.setText("0.00");
      percentTxt.setText("0.00");
        
            TenderPreliminaryReportPDF policy = new TenderPreliminaryReportPDF();
            policy.TenderPreliminaryReportPDF(connectDB, tenderNoTxt.getText());
        
//      awardingTbl.setValueAt(0.00, awardingTbl.getRowCount(), 2);
//      awardingTbl.setValueAt(Boolean.FALSE, awardingTbl.getRowCount(), 1);
      
      
      
      
      
     // biddderListSync(tenderNoTxt.getText());
      supplier_codeCmbx.setModel(com.afrisoftech.lib.ComboBoxModel.ComboBoxModel(connectDB, "SELECT  bidder_no FROM st_bidder_code where quotation_no = '"+tenderNoTxt.getText()+"' "
                  + "and bidder_no NOT IN (SELECT distinct supplier_code from st_preliminary_results where quotation_no = '"+tenderNoTxt.getText()+"')"));
      
      
      
//      for ( int c = supplier_codeCmbx.getSelectedIndex();c<supplier_codeCmbx.getItemCount();c++){
//      supplier_codeCmbx.setSelectedIndex(c+1);
//      
//      
//      }
            
        } 
        
        
        catch (SQLException ex) {
            try {
                connectDB.rollback();
                ex.printStackTrace();
                 javax.swing.JOptionPane.showMessageDialog(this, ex.getMessage());
                Logger.getLogger(SSOTenderEvaluationIntfr.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SQLException ex1) {
                Logger.getLogger(SSOTenderEvaluationIntfr.class.getName()).log(Level.SEVERE, null, ex1);
            }
        }
                
        
        
        
        
    }//GEN-LAST:event_jButton3ActionPerformed

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton5ActionPerformed

    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed
        // TODO add your handling code here:
        this.dispose();
    }//GEN-LAST:event_jButton6ActionPerformed

    private void awardingTblMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_awardingTblMouseReleased
        // TODO add your handling code here:
      
    }//GEN-LAST:event_awardingTblMouseReleased

    private void awardingTblMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_awardingTblMouseClicked
        // TODO add your handling code here:
  
    if(awardingTbl.getSelectedColumn()==1){}
        
        if (awardingTbl.getValueAt(awardingTbl.getSelectedRow(), 1).toString()=="true"){
         awardingTbl.setValueAt(1,awardingTbl.getSelectedRow(), 2);
        }
        else{
        
         awardingTbl.setValueAt(0,awardingTbl.getSelectedRow(), 2);
        
        }
        
        total=com.afrisoftech.lib.TableColumnTotal.getTableColumnTotal(awardingTbl, 2);
        percent= (total/awardingTbl.getRowCount())*100;
        
        
        
        totalTxt.setText(String.valueOf(total));
        percentTxt.setText(String.valueOf(percent));
//        {
//            Double totalAmnt = 0.0, qtytotal = 0.0;
//            if (Boolean.valueOf(jTable2.getModel().getValueAt(jTable2.getSelectedRow(), 1).toString()) == java.lang.Boolean.TRUE) {
//                totalAmnt = 0.0;
//                qtytotal = 0.0;
//                if (v.contains(jTable2.getSelectedRow())) {
//                      v.remove(jTable2.getSelectedRow());
//                } else if (!v.contains(jTable2.getSelectedRow())) {
//                    v.add(jTable2.getSelectedRow());
//                }
//            } 
//            
//            else if (Boolean.valueOf(jTable2.getModel().getValueAt(jTable2.getSelectedRow(), 1).toString()) == java.lang.Boolean.FALSE) {
//                totalAmnt = 0.0;
//                qtytotal = 0.0;
//                v.remove(jTable2.getSelectedRow());
//            }
//
//
//
//
//            for (int i = 0; i < v.size(); i++) {
//                Double total = Double.parseDouble(jTable2.getModel().getValueAt(Integer.parseInt(v.elementAt(i).toString()), 2).toString());
//                totalAmnt = totalAmnt + total;
//                Double totals = Double.parseDouble(jTable2.getModel().getValueAt(Integer.parseInt(v.elementAt(i).toString()), 2).toString());
//                qtytotal = qtytotal + totals;
//
//            }
//
////            
////          
//            System.out.println(totalAmnt);
//            jTextField1.setText(totalAmnt.toString());
//            
//            
//            Double b = 0.00;
//            b= (totalAmnt/jTable2.getRowCount())*100;
//            jTextField4.setText(b.toString()+"%");
//           // jTextField1.setText(qtytotal.toString());
//
//        }
    }//GEN-LAST:event_awardingTblMouseClicked

    private void jTabbedPane2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTabbedPane2MouseClicked
        // TODO add your handling code here:
        if(jTabbedPane2.getSelectedIndex()==1){
        TenderOtherTxt.setText(tenderNoTxt.getText().toString());
        
        bidderCmbx.setModel(com.afrisoftech.lib.ComboBoxModel.ComboBoxModel(connectDB, "SELECT  bidder_no FROM st_bidder_code where quotation_no = '"+tenderNoTxt.getText()+"' "
                  + "and bidder_no IN (SELECT distinct supplier_code from st_preliminary_results where quotation_no = '"+tenderNoTxt.getText()+"')"));
        
        }
    }//GEN-LAST:event_jTabbedPane2MouseClicked

    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton7ActionPerformed
        try {
            // TODO add your handling code here:
            java.sql.PreparedStatement ins = connectDB.prepareStatement("UPDATE st_preliminary_results SET  bid_expiry='"+com.afrisoftech.lib.SQLDateFormat.getSQLDate(datePicker2.getDate())+"', bid_bond_amt='"+Double.parseDouble(jTextField3.getText().toString())+"', bank='"+jComboBox2.getSelectedItem().toString()+"' "
                    + "WHERE quotation_no='"+TenderOtherTxt.getText().toString()+"' and supplier_code='"+bidderCmbx.getSelectedItem().toString()+"';");
            
             ins.executeUpdate();
             connectDB.commit();
             javax.swing.JOptionPane.showMessageDialog(this,"Bidder Info Updated Succesfully");
            
        } catch (SQLException ex) {
            ex.printStackTrace();
            Logger.getLogger(SSOTenderEvaluationIntfr.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        
        
    }//GEN-LAST:event_jButton7ActionPerformed

    private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton8ActionPerformed
        // TODO add your handling code here:
        this.dispose();
    }//GEN-LAST:event_jButton8ActionPerformed

    private void jComboBox2FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jComboBox2FocusLost
        // TODO add your handling code here:
        //java.sql.PreparedStatement ps =
    }//GEN-LAST:event_jComboBox2FocusLost

    private void tenderrecordstxt1CaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_tenderrecordstxt1CaretUpdate
        // TODO add your handling code here:
                // TODO add your handling code here:
        if (this.tenderrecordstxt1.getCaretPosition() < 1) {
            System.out.print("Nothing");

        } else

        {
            tenderrecordstbl1.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, "SELECT DISTINCT quotation_no FROM st_floated_quotations  where "
                + "quotation_no ilike '%T%' and  quotation_no ilike '" +tenderrecordstxt.getText()+"%' order by 1 desc;"));
        tenderrecordstbl1.setShowHorizontalLines(false);

        tenderrecordsspnl1.setViewportView(tenderrecordstbl1);

        }
        
    }//GEN-LAST:event_tenderrecordstxt1CaretUpdate

    private void tenderrecordstxt1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tenderrecordstxt1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tenderrecordstxt1ActionPerformed

    private void tenderrecordstbl1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tenderrecordstbl1MouseClicked
        try {
            // TODO add your handling code here:
//             tendernotxt3.setText(tenderrecordstbl1.getValueAt(tenderrecordstbl1.getSelectedRow(), 0).toString());
             
//               for (int k = 0; k < jTable3.getRowCount(); k++) {
//            for (int r = 0; r < jTable3.getColumnCount(); r++) {
//                jTable3.getModel().setValueAt(null, k, r);
//            }
//        }
           //  ClearTable.clearthisTable(jTable3);
      
             
          
             
             //System.out.println("select distinct supplier from st_floated_quotations where quotation_no='"+tendernotxt3.getText().toString()+"'");
            // System.out.println("select distinct supplier_name from st_tender_suppliers where tender='"+tendernotxt3.getText().toString()+"' and opened=true");
             
             //st_tender_suppliers --tender --supplier_name
                  
             
//             java.sql.PreparedStatement pst = connectDB.prepareStatement("select distinct supplier_name from st_tender_suppliers where tender='"+tendernotxt3.getText().toString()+"' and opened=true");
//             java.sql.ResultSet rset =pst.executeQuery();
//             int i=1;
//             int j=0;
//               while (rset.next()){
////               jTable3.setValueAt(rset.getObject(1), j, 0);
//  //             jTable3.setValueAt(i, j, 1);
//               
//               i++;
//               j++;
//               
//               }
                
             
             
  
             
                      closebtn2.doClick();
             
             
        } catch (Exception ex) {
            ex.printStackTrace();
            Logger.getLogger(SSOTenderEvaluationIntfr.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_tenderrecordstbl1MouseClicked

    private void closebtn2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closebtn2ActionPerformed
        // TODO add your handling code here:
        this.searchtender1.dispose();
    }//GEN-LAST:event_closebtn2ActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField TenderOtherTxt;
    private javax.swing.JTable awardingTbl;
    private javax.swing.JComboBox bidderCmbx;
    private javax.swing.JButton closebtn1;
    private javax.swing.JButton closebtn2;
    private com.afrisoftech.lib.DatePicker datePicker2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JButton jButton7;
    private javax.swing.JButton jButton8;
    private javax.swing.JComboBox jComboBox2;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel46;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JTabbedPane jTabbedPane2;
    private javax.swing.JTextField jTextField3;
    private javax.swing.JTextField percentTxt;
    private javax.swing.JButton searchButton2;
    private javax.swing.JDialog searchtender;
    private javax.swing.JDialog searchtender1;
    private javax.swing.JComboBox supplier_codeCmbx;
    private javax.swing.JTextField tenderNoTxt;
    private javax.swing.JPanel tenderrecordspnl;
    private javax.swing.JPanel tenderrecordspnl1;
    private javax.swing.JScrollPane tenderrecordsspnl;
    private javax.swing.JScrollPane tenderrecordsspnl1;
    private javax.swing.JTable tenderrecordstbl;
    private javax.swing.JTable tenderrecordstbl1;
    private javax.swing.JTextField tenderrecordstxt;
    private javax.swing.JTextField tenderrecordstxt1;
    private javax.swing.JTextField totalTxt;
    // End of variables declaration//GEN-END:variables
}
