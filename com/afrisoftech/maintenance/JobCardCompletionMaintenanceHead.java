/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.afrisoftech.maintenance;

import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JComponent;
import javax.swing.JOptionPane;
import org.netbeans.lib.sql.pool.PooledConnection;
import org.netbeans.lib.sql.pool.PooledConnectionSource;

/**
 *
 * @author charlie
 */
public class JobCardCompletionMaintenanceHead extends javax.swing.JInternalFrame{
    JComponent[] arrComponents;
    public Connection connectDB=null;
    public PooledConnectionSource pconnDB;
    
    /**
     * Creates new form MachineSetup
     */
     public JobCardCompletionMaintenanceHead(Connection cd,PooledConnectionSource pc) {
         connectDB=cd;
         pconnDB=pc;
         
         initComponents();
         
        //tblReport = loadData(tblReport, this.uuid, "tblReport");
//        
//        arrComponents = new JComponent[10];
//        arrComponents[0] = buildingCombo;
//        arrComponents[1] = floorTextField;
//        arrComponents[2] = deptCombo;
//        arrComponents[3] = urgencyCombo;
//        //arrComponents[4] = tblReport;
//        arrComponents[5] = descriptionArea;
//        arrComponents[6] = roomTextField;
//        arrComponents[7] = phoneTextField;
//        arrComponents[8] = subjectTextField;
       
        /*try {
         initComponents();
         dbConn mpya=new dbConn();
         Connection conn=mpya.connector();
         machineCbx.removeAllItems();
         String sql="select asset_name from public.asset_registration WHERE make LIKE 'laundry'";
         Statement stmt = conn.createStatement();
         ResultSet rs = stmt.executeQuery( sql );
         while ( rs.next() ) {
         machineCbx.addItem(rs.getString("asset_name"));
         }
         } catch (SQLException ex) {
         Logger.getLogger(MachineSetup.class.getName()).log(Level.SEVERE, null, ex);
         }*/
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanel1 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jPanel11 = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jLabel161 = new javax.swing.JLabel();
        jLabel164 = new javax.swing.JLabel();
        floorCompletedJobCardjTextField = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        roomCompletedJobCardTextField = new javax.swing.JTextField();
        phoneCompletedJobCardTextField = new javax.swing.JTextField();
        jLabel83 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        descriptionCompletedJobCardArea = new javax.swing.JTextArea();
        filler1 = new javax.swing.Box.Filler(new java.awt.Dimension(0, 0), new java.awt.Dimension(25, 20), new java.awt.Dimension(0, 0));
        deptCompletedJobCardjTextField = new javax.swing.JTextField();
        buildCompletedJobCardjTextField = new javax.swing.JTextField();
        assignCompletedS11jComboBox = new javax.swing.JComboBox();
        nameOfficerLabel = new javax.swing.JLabel();
        nameOfficersCompletedS11TextField = new javax.swing.JTextField();
        jobCardTextField = new javax.swing.JTextField();
        e1ApproverLabel2 = new javax.swing.JLabel();
        pendingjPanel = new javax.swing.JPanel();
        pendingjScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        workPendingjLabel = new javax.swing.JLabel();
        assignSectionLabel1 = new javax.swing.JLabel();
        pendingjScrollPane2 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();
        assignSectionLabel2 = new javax.swing.JLabel();
        pendingjScrollPane3 = new javax.swing.JScrollPane();
        jTextArea3 = new javax.swing.JTextArea();
        searchPanel = new javax.swing.JPanel();
        filler2 = new javax.swing.Box.Filler(new java.awt.Dimension(0, 0), new java.awt.Dimension(25, 20), new java.awt.Dimension(32767, 32767));
        tablePanel = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        completeds11jTable = new javax.swing.JTable();
        searchjTextField = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        filler3 = new javax.swing.Box.Filler(new java.awt.Dimension(0, 0), new java.awt.Dimension(25, 20), new java.awt.Dimension(32767, 32767));
        clearjButton = new javax.swing.JButton();
        jPanel6 = new javax.swing.JPanel();
        jButton5 = new javax.swing.JButton();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Job Card Completion Report - Maintenance Head");
        setMaximumSize(new java.awt.Dimension(900, 517));
        setMinimumSize(new java.awt.Dimension(900, 517));
        setPreferredSize(new java.awt.Dimension(900, 517));
        setVisible(true);
        getContentPane().setLayout(new java.awt.GridBagLayout());

        jPanel1.setLayout(new java.awt.GridBagLayout());

        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jPanel7.setLayout(new java.awt.GridBagLayout());

        jPanel11.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jPanel11.setLayout(new java.awt.GridBagLayout());

        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel8.setText("Department:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel8, gridBagConstraints);

        jLabel16.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel16.setText("Room:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel16, gridBagConstraints);

        jLabel161.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel161.setText("Floor:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel161, gridBagConstraints);

        jLabel164.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel164.setText("Building:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel164, gridBagConstraints);

        floorCompletedJobCardjTextField.setEditable(false);
        floorCompletedJobCardjTextField.setColumns(10);
        floorCompletedJobCardjTextField.setMaximumSize(new java.awt.Dimension(32767, 32767));
        floorCompletedJobCardjTextField.setMinimumSize(new java.awt.Dimension(150, 20));
        floorCompletedJobCardjTextField.setName("floorCompletedJobCardjTextField"); // NOI18N
        floorCompletedJobCardjTextField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                floorCompletedJobCardjTextFieldActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(floorCompletedJobCardjTextField, gridBagConstraints);

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel10.setText("Sender's Satisfaction Level");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 9;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel10, gridBagConstraints);

        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel9.setText("Description:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel9, gridBagConstraints);

        roomCompletedJobCardTextField.setEditable(false);
        roomCompletedJobCardTextField.setColumns(10);
        roomCompletedJobCardTextField.setMaximumSize(new java.awt.Dimension(32767, 32767));
        roomCompletedJobCardTextField.setMinimumSize(new java.awt.Dimension(150, 20));
        roomCompletedJobCardTextField.setName("roomCompletedJobCardTextField"); // NOI18N
        roomCompletedJobCardTextField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                roomCompletedJobCardTextFieldActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(roomCompletedJobCardTextField, gridBagConstraints);

        phoneCompletedJobCardTextField.setEditable(false);
        phoneCompletedJobCardTextField.setColumns(10);
        phoneCompletedJobCardTextField.setMaximumSize(new java.awt.Dimension(32767, 32767));
        phoneCompletedJobCardTextField.setMinimumSize(new java.awt.Dimension(150, 20));
        phoneCompletedJobCardTextField.setName("phoneCompletedJobCardTextField"); // NOI18N
        phoneCompletedJobCardTextField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                phoneCompletedJobCardTextFieldActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(phoneCompletedJobCardTextField, gridBagConstraints);

        jLabel83.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel83.setText("Phone Ext:");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(jLabel83, gridBagConstraints);

        jScrollPane2.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        jScrollPane2.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);

        descriptionCompletedJobCardArea.setEditable(false);
        descriptionCompletedJobCardArea.setColumns(20);
        descriptionCompletedJobCardArea.setLineWrap(true);
        descriptionCompletedJobCardArea.setRows(5);
        jScrollPane2.setViewportView(descriptionCompletedJobCardArea);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel11.add(jScrollPane2, gridBagConstraints);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel11.add(filler1, gridBagConstraints);

        deptCompletedJobCardjTextField.setEditable(false);
        deptCompletedJobCardjTextField.setColumns(10);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(deptCompletedJobCardjTextField, gridBagConstraints);

        buildCompletedJobCardjTextField.setEditable(false);
        buildCompletedJobCardjTextField.setColumns(10);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(buildCompletedJobCardjTextField, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 9;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(assignCompletedS11jComboBox, gridBagConstraints);

        nameOfficerLabel.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        nameOfficerLabel.setText("Name Of Officers");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 7;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(nameOfficerLabel, gridBagConstraints);

        nameOfficersCompletedS11TextField.setEditable(false);
        nameOfficersCompletedS11TextField.setColumns(10);
        nameOfficersCompletedS11TextField.setFont(new java.awt.Font("Cantarell", 1, 15)); // NOI18N
        nameOfficersCompletedS11TextField.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nameOfficersCompletedS11TextFieldActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 7;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(nameOfficersCompletedS11TextField, gridBagConstraints);

        jobCardTextField.setEditable(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel11.add(jobCardTextField, gridBagConstraints);

        e1ApproverLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        e1ApproverLabel2.setText("Job Card No");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        jPanel11.add(e1ApproverLabel2, gridBagConstraints);

        pendingjPanel.setLayout(new java.awt.GridBagLayout());

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        pendingjScrollPane1.setViewportView(jTextArea1);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        pendingjPanel.add(pendingjScrollPane1, gridBagConstraints);

        workPendingjLabel.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        workPendingjLabel.setText("Sender's Report");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        pendingjPanel.add(workPendingjLabel, gridBagConstraints);

        assignSectionLabel1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        assignSectionLabel1.setForeground(java.awt.Color.red);
        assignSectionLabel1.setText("Maintenance Head Remarks");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        pendingjPanel.add(assignSectionLabel1, gridBagConstraints);

        jTextArea2.setEditable(false);
        jTextArea2.setColumns(20);
        jTextArea2.setRows(5);
        pendingjScrollPane2.setViewportView(jTextArea2);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        pendingjPanel.add(pendingjScrollPane2, gridBagConstraints);

        assignSectionLabel2.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        assignSectionLabel2.setText("Worker's Report");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
        pendingjPanel.add(assignSectionLabel2, gridBagConstraints);

        jTextArea3.setEditable(false);
        jTextArea3.setColumns(20);
        jTextArea3.setRows(5);
        pendingjScrollPane3.setViewportView(jTextArea3);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        pendingjPanel.add(pendingjScrollPane3, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 10;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel11.add(pendingjPanel, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 2.0;
        jPanel7.add(jPanel11, gridBagConstraints);

        searchPanel.setLayout(new java.awt.GridBagLayout());
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        searchPanel.add(filler2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        jPanel7.add(searchPanel, gridBagConstraints);

        tablePanel.setLayout(new java.awt.GridBagLayout());

        completeds11jTable = new com.afrisoftech.dbadmin.JTable();
        completeds11jTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {},
                {},
                {},
                {}
            },
            new String [] {

            }
        ));
        completeds11jTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null},
                {null,null,null,null,null,null,null}

            },

            new String[] {"Job Card ID","Department","Floor","Room","Subject","Official's Name"}

        )
    );

    //the table's model will only populate when the E1 has been approved AND when it has been registered.

    //jTable1.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB, SELECT (SELECT job_card_no FROM maintenance.job_card_details WHERE e1_id='E14'),e1_id,department,floor,room,subject,(SELECT officers_assigned FROM maintenance.job_card_details WHERE e1_id='E14') FROM maintenance.e1_details
        //where e1_id='E14'
        //AND e1_id IN (SELECT e1_id FROM maintenance.e1_approved)
        //AND e1_id IN (SELECT e1_id FROM maintenance.e1_details WHERE registered='true'));

    completeds11jTable.setModel(completeds11jTableModel());

    completeds11jTable.getTableHeader().setReorderingAllowed(false);

    javax.swing.JTextField s11NoCellEdit=new javax.swing.JTextField();
    s11NoCellEdit.setEditable(false);

    for(int c=0;c<completeds11jTable.getColumnCount();c++){
        javax.swing.table.TableColumn tcS11 = completeds11jTable.getColumn(completeds11jTable.getColumnName(c));
        tcS11.setCellEditor(new javax.swing.DefaultCellEditor(s11NoCellEdit));
    }
    completeds11jTable.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            completeds11jTableMouseClicked(evt);
        }
    });
    jScrollPane3.setViewportView(completeds11jTable);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 1;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 1.0;
    tablePanel.add(jScrollPane3, gridBagConstraints);

    searchjTextField.setColumns(10);
    searchjTextField.addCaretListener(new javax.swing.event.CaretListener() {
        public void caretUpdate(javax.swing.event.CaretEvent evt) {
            searchjTextFieldCaretUpdate(evt);
        }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
    tablePanel.add(searchjTextField, gridBagConstraints);

    jLabel1.setText("Search By Job Card No.");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    tablePanel.add(jLabel1, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 1.0;
    jPanel7.add(tablePanel, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 20.0;
    gridBagConstraints.weighty = 1.0;
    jPanel1.add(jPanel7, gridBagConstraints);

    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
    jPanel2.setLayout(new java.awt.GridBagLayout());

    jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
    jPanel3.setLayout(new java.awt.GridBagLayout());
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 1.0;
    jPanel2.add(jPanel3, gridBagConstraints);

    jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder("Actions"));
    jPanel4.setLayout(new java.awt.GridBagLayout());

    jButton1.setMnemonic('w');
    jButton1.setText("Complete Job Card Report");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
    jPanel4.add(jButton1, gridBagConstraints);
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 1;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
    gridBagConstraints.weighty = 1.0;
    jPanel4.add(filler3, gridBagConstraints);

    clearjButton.setText("Clear Fields");
    clearjButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            clearjButtonActionPerformed(evt);
        }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 4;
    gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);
    jPanel4.add(clearjButton, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 1;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 30.0;
    jPanel2.add(jPanel4, gridBagConstraints);

    jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder("Assistance"));
    jPanel6.setLayout(new java.awt.GridBagLayout());

    jButton5.setMnemonic('H');
    jButton5.setText("Help");
    jPanel6.add(jButton5, new java.awt.GridBagConstraints());

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 1.0;
    jPanel2.add(jPanel6, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 1.0;
    jPanel1.add(jPanel2, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 1;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    gridBagConstraints.ipadx = 100;
    gridBagConstraints.ipady = 100;
    gridBagConstraints.weightx = 1.0;
    gridBagConstraints.weighty = 5.0;
    getContentPane().add(jPanel1, gridBagConstraints);

    pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed

        int yes;
        
        try{
            
            connectDB.setAutoCommit(false);
            
            String currentUsr=null;
                java.sql.Statement jobCardSeqStt=connectDB.createStatement();
                java.sql.ResultSet jobCardSeqRSet=jobCardSeqStt.executeQuery("SELECT current_user");
                
                while(jobCardSeqRSet.next()){
                    currentUsr=jobCardSeqRSet.getString(1);
                }
                
                if(jTextArea1.getText().length()<1){
                    yes=javax.swing.JOptionPane.showConfirmDialog(null, "Proceed to save without Maintenance Head's comment?");
            
                    if(yes==javax.swing.JOptionPane.YES_OPTION){
                        java.sql.PreparedStatement registerPrepStt=connectDB.prepareStatement("UPDATE maintenance.job_card_details SET head_completion_remarks=?,completion_maintenance_username=? WHERE job_card_no='"+jobCardTextField.getText()+"'");
                        registerPrepStt.setString(1, "-");
                        registerPrepStt.setString(2, currentUsr);
                        
                        registerPrepStt.executeUpdate();
                        
                        //                 save and clean up
                        connectDB.commit();
                        connectDB.setAutoCommit(true);
                
                        //notification
                        javax.swing.JOptionPane.showMessageDialog(this, "Insert Successful!");
                    }
                }
                else{
                    java.sql.PreparedStatement registerPrepStt=connectDB.prepareStatement("UPDATE maintenance.job_card_details SET head_completion_remarks=?,completion_maintenance_username=? WHERE job_card_no='"+jobCardTextField.getText()+"'");
                    registerPrepStt.setString(1, jTextArea1.getText());
                    registerPrepStt.setString(2, currentUsr);
                        
                    registerPrepStt.executeUpdate();
                    
                    //                 save and clean up
                    connectDB.commit();
                    connectDB.setAutoCommit(true);
                
                    //notification
                    javax.swing.JOptionPane.showMessageDialog(this, "Insert Successful!");
            
                }
                

        
            
        }
        catch(java.sql.SQLException sqle){
                sqle.printStackTrace();
                
                try{
                    connectDB.rollback();
                    connectDB.setAutoCommit(true);
                }
                catch(java.sql.SQLException sqlex){
                    sqlex.printStackTrace();
                }
            }
        
//          disable save
            jButton1.setEnabled(false);
            
            //clear fields
            clearjButton.doClick();
        
        
//        if(assignCompletedS11jComboBox.getSelectedItem().toString().equalsIgnoreCase("-")){
//            javax.swing.JOptionPane.showMessageDialog(this, "Please state your satisfaction level",
//                    "Caution Message",
//                    javax.swing.JOptionPane.INFORMATION_MESSAGE);
//        } 
//        else{
//            
//            try{
//                
//                //java.text.SimpleDateFormat sdf=new java.text.SimpleDateFormat("yyyy-mm-dd hh:mm:ss[.fffffffff]");
//                
//                connectDB.setAutoCommit(false);
//                
//                java.text.SimpleDateFormat sdf=new java.text.SimpleDateFormat("yyyy-mm-dd hh:mm:ss[.fffffffff]");
//                
//                String currentUsr=null;
//                java.sql.Statement jobCardSeqStt=connectDB.createStatement();
//                java.sql.ResultSet jobCardSeqRSet=jobCardSeqStt.executeQuery("SELECT current_user");
//                
//                while(jobCardSeqRSet.next()){
//                    currentUsr=jobCardSeqRSet.getString(1);
//                }
//                
//                java.sql.PreparedStatement registerPrepStt=connectDB.prepareStatement("UPDATE maintenance.job_card_details SET satisfaction_level=?,sender_completion_remarks=?,sender_completion_time=? WHERE job_card_no='"+jobCardTextField.getText()+"'");
//                registerPrepStt.setObject(1, assignCompletedS11jComboBox.getSelectedItem());
//                if(jTextArea1.getText().length()<1){
//                    registerPrepStt.setString(2, null);
//                }else{
//                    registerPrepStt.setString(2, jTextArea1.getText());
//                }
//                registerPrepStt.setObject(3, sdf.format(new java.util.Date()));
//                registerPrepStt.executeUpdate();
//               
//                //save and clean up
//                connectDB.commit();
//                connectDB.setAutoCommit(true);
//                
//                //notification
//                javax.swing.JOptionPane.showMessageDialog(this, "Insert Successful!");
//                
//                 //clear
//                clearjButton.doClick();
//                
//            }//ends try
//            catch(java.sql.SQLException sqle){
//                sqle.printStackTrace();
//                
//                try{
//                    connectDB.rollback();
//                    connectDB.setAutoCommit(true);
//                }
//                catch(java.sql.SQLException sqlex){
//                    sqlex.printStackTrace();
//                }
//            }
//            
//                    
//            //disable save
//            jButton1.setEnabled(false);
//            
//            //clear fields
//            clearjButton.doClick();
//            
//        }


    }//GEN-LAST:event_jButton1ActionPerformed

    private void floorCompletedJobCardjTextFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_floorCompletedJobCardjTextFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_floorCompletedJobCardjTextFieldActionPerformed

    private void roomCompletedJobCardTextFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_roomCompletedJobCardTextFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_roomCompletedJobCardTextFieldActionPerformed

    private void phoneCompletedJobCardTextFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_phoneCompletedJobCardTextFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_phoneCompletedJobCardTextFieldActionPerformed

    private void clearjButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_clearjButtonActionPerformed
        // TODO add your handling code here:
        jobCardTextField.setText("");
        deptCompletedJobCardjTextField.setText("");
        buildCompletedJobCardjTextField.setText("");
        floorCompletedJobCardjTextField.setText("");
        roomCompletedJobCardTextField.setText("");
        phoneCompletedJobCardTextField.setText("");
        descriptionCompletedJobCardArea.setText("");
        nameOfficersCompletedS11TextField.setText("");
        assignCompletedS11jComboBox.removeAllItems();
        jTextArea1.setText("");
        jTextArea3.setText("");
        jTextArea2.setText("");
        
        searchjTextField.setText("");
                
        javax.swing.table.DefaultTableModel dtm=completeds11jTableModel();
        completeds11jTable.setModel(dtm);
        dtm.fireTableStructureChanged();
        
    }//GEN-LAST:event_clearjButtonActionPerformed

    private void nameOfficersCompletedS11TextFieldActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_nameOfficersCompletedS11TextFieldActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_nameOfficersCompletedS11TextFieldActionPerformed

    private void completeds11jTableMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_completeds11jTableMouseClicked
        // TODO add your handling code here:
        int row=completeds11jTable.getSelectedRow();
        assignCompletedS11jComboBox.removeAllItems();
        
        jobCardTextField.setText(completeds11jTable.getValueAt(row, 0).toString());
        deptCompletedJobCardjTextField.setText(completeds11jTable.getValueAt(row, 1).toString());
        floorCompletedJobCardjTextField.setText(completeds11jTable.getValueAt(row, 2).toString());
        roomCompletedJobCardTextField.setText(completeds11jTable.getValueAt(row, 3).toString());
        nameOfficersCompletedS11TextField.setText(completeds11jTable.getValueAt(row, 5).toString());
        
        try{
            java.sql.Statement othersStt=connectDB.createStatement();
            java.sql.ResultSet othersSet=othersStt.executeQuery("SELECT building,phone_ext,description,jcd.officers_assigned,satisfaction_level,sender_completion_remarks,reason_work_pending FROM maintenance.e1_details ed INNER JOIN maintenance.job_card_details jcd ON ed.e1_id=jcd.e1_id WHERE job_card_no='"+jobCardTextField.getText()+"'");
            
            while(othersSet.next()){
                buildCompletedJobCardjTextField.setText(othersSet.getString(1));
                phoneCompletedJobCardTextField.setText(othersSet.getString(2));
                descriptionCompletedJobCardArea.setText(othersSet.getString(3));
                nameOfficersCompletedS11TextField.setText(othersSet.getString(4));
                assignCompletedS11jComboBox.addItem(othersSet.getString(5));
                jTextArea3.setText(othersSet.getString(6));
                jTextArea2.setText(othersSet.getString(7));
                
            }
        }
        catch(java.sql.SQLException sqle){
            sqle.printStackTrace();
        }
        
        if(!jButton1.isEnabled()){
            jButton1.setEnabled(true);
        }

    }//GEN-LAST:event_completeds11jTableMouseClicked

    private void searchjTextFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_searchjTextFieldCaretUpdate
        // TODO add your handling code here:
        completeds11jTable.setModel(com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB," SELECT job_card_no,ed.department,ed.floor,ed.room,ed.subject,officers_assigned FROM maintenance.job_card_details jcd "
                                                                                                                                + "INNER JOIN maintenance.e1_details ed on jcd.e1_id=ed.e1_id "
                                                                                                                                + "WHERE completion_worker_username IS NOT NULL "
                                                                                                                                + "AND completion_sender_username IS NOT NULL "
                                                                                                                                + "AND completion_maintenance_username IS NULL AND job_card_no ILIKE '"+searchjTextField.getText()+"%' "
                                                                                                                                + "ORDER BY job_card_no"));
    }//GEN-LAST:event_searchjTextFieldCaretUpdate

    public javax.swing.table.DefaultTableModel completeds11jTableModel(){
        return com.afrisoftech.dbadmin.TableModel.createTableVectors(connectDB," SELECT job_card_no,ed.department,ed.floor,ed.room,ed.subject,officers_assigned FROM maintenance.job_card_details jcd "
                                                                                                                                + "INNER JOIN maintenance.e1_details ed on jcd.e1_id=ed.e1_id "
                                                                                                                                + "WHERE completion_worker_username IS NOT NULL "
                                                                                                                                + "AND completion_sender_username IS NOT NULL "
                                                                                                                                + "AND completion_maintenance_username IS NULL "
                                                                                                                                + "ORDER BY job_card_no");
    }
            
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox assignCompletedS11jComboBox;
    private javax.swing.JLabel assignSectionLabel1;
    private javax.swing.JLabel assignSectionLabel2;
    private javax.swing.JTextField buildCompletedJobCardjTextField;
    private javax.swing.JButton clearjButton;
    private javax.swing.JTable completeds11jTable;
    private javax.swing.JTextField deptCompletedJobCardjTextField;
    private javax.swing.JTextArea descriptionCompletedJobCardArea;
    private javax.swing.JLabel e1ApproverLabel2;
    private javax.swing.Box.Filler filler1;
    private javax.swing.Box.Filler filler2;
    private javax.swing.Box.Filler filler3;
    private javax.swing.JTextField floorCompletedJobCardjTextField;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton5;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel161;
    private javax.swing.JLabel jLabel164;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel83;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextArea jTextArea3;
    private javax.swing.JTextField jobCardTextField;
    private javax.swing.JLabel nameOfficerLabel;
    private javax.swing.JTextField nameOfficersCompletedS11TextField;
    private javax.swing.JPanel pendingjPanel;
    private javax.swing.JScrollPane pendingjScrollPane1;
    private javax.swing.JScrollPane pendingjScrollPane2;
    private javax.swing.JScrollPane pendingjScrollPane3;
    private javax.swing.JTextField phoneCompletedJobCardTextField;
    private javax.swing.JTextField roomCompletedJobCardTextField;
    private javax.swing.JPanel searchPanel;
    private javax.swing.JTextField searchjTextField;
    private javax.swing.JPanel tablePanel;
    private javax.swing.JLabel workPendingjLabel;
    // End of variables declaration//GEN-END:variables
}
